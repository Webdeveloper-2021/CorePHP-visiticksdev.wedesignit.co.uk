/**
 * @license
 * Ideal Postcodes <https://ideal-postcodes.co.uk>
 * Copyright IDDQD Limited
 * Postcode Lookup Bundled 2.2.4
 * Built on Postcode Lookup ~1.7.1
 * AGPL-3.0 Licence
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).IdealPostcodes=e.IdealPostcodes||{})}(this,(function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function d(e,t,n){return(d=f()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&l(o,n.prototype),o}).apply(null,arguments)}function h(e){var t="function"==typeof Map?new Map:void 0;return(h=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return d(e,arguments,c(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?p(e):t}function y(e){var t=f();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=setTimeout;function w(e){return Boolean(e&&void 0!==e.length)}function k(){}function S(e){if(!(this instanceof S))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],O(e,this)}function E(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,S._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void A(t.promise,e)}C(t.promise,r)}else(1===e._state?C:A)(t.promise,e._value)}))):e._deferreds.push(t)}function C(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof S)return e._state=3,e._value=t,void _(e);if("function"==typeof n)return void O((r=n,o=t,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=t,_(e)}catch(t){A(e,t)}var r,o}function A(e,t){e._state=2,e._value=t,_(e)}function _(e){2===e._state&&0===e._deferreds.length&&S._immediateFn((function(){e._handled||S._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)E(e,e._deferreds[t]);e._deferreds=null}function j(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function O(e,t){var n=!1;try{e((function(e){n||(n=!0,C(t,e))}),(function(e){n||(n=!0,A(t,e))}))}catch(e){if(n)return;n=!0,A(t,e)}}S.prototype.catch=function(e){return this.then(null,e)},S.prototype.then=function(e,t){var n=new this.constructor(k);return E(this,new j(e,t,n)),n},S.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))},S.all=function(e){return new S((function(t,n){if(!w(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var o=r.length;function i(e,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var u=s.then;if("function"==typeof u)return void u.call(s,(function(t){i(e,t)}),n)}r[e]=s,0==--o&&t(r)}catch(e){n(e)}}for(var s=0;s<r.length;s++)i(s,r[s])}))},S.allSettled=function(e){return new this((function(t,n){if(!e||void 0===e.length)return n(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var o=r.length;function i(e,n){if(n&&("object"==typeof n||"function"==typeof n)){var s=n.then;if("function"==typeof s)return void s.call(n,(function(t){i(e,t)}),(function(n){r[e]={status:"rejected",reason:n},0==--o&&t(r)}))}r[e]={status:"fulfilled",value:n},0==--o&&t(r)}for(var s=0;s<r.length;s++)i(s,r[s])}))},S.resolve=function(e){return e&&"object"==typeof e&&e.constructor===S?e:new S((function(t){t(e)}))},S.reject=function(e){return new S((function(t,n){n(e)}))},S.race=function(e){return new S((function(t,n){if(!w(e))return n(new TypeError("Promise.race accepts an array"));for(var r=0,o=e.length;r<o;r++)S.resolve(e[r]).then(t,n)}))},S._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){b(e,0)},S._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var x=function(e){a(r,e);var t=y(r);function r(e){var o;n(this,r);var i=(this instanceof r?this.constructor:void 0).prototype;(o=t.call(this)).__proto__=i;var s=e.message,u=e.httpStatus,a=e.metadata,c=void 0===a?{}:a;return o.message=s,o.name="Ideal Postcodes Error",o.httpStatus=u,o.metadata=c,Error.captureStackTrace&&Error.captureStackTrace(p(o),r),o}return r}(h(Error)),P=function(e){a(r,e);var t=y(r);function r(e){var o;return n(this,r),(o=t.call(this,{httpStatus:e.httpStatus,message:e.body.message})).response=e,o}return r}(x),T=function(e){a(r,e);var t=y(r);function r(){return n(this,r),t.apply(this,arguments)}return r}(P),I=function(e){a(r,e);var t=y(r);function r(){return n(this,r),t.apply(this,arguments)}return r}(P),L=function(e){a(r,e);var t=y(r);function r(){return n(this,r),t.apply(this,arguments)}return r}(I),R=function(e){a(r,e);var t=y(r);function r(){return n(this,r),t.apply(this,arguments)}return r}(P),U=function(e){a(r,e);var t=y(r);function r(){return n(this,r),t.apply(this,arguments)}return r}(R),q=function(e){a(r,e);var t=y(r);function r(){return n(this,r),t.apply(this,arguments)}return r}(R),F=function(e){a(r,e);var t=y(r);function r(){return n(this,r),t.apply(this,arguments)}return r}(P),N=function(e){a(r,e);var t=y(r);function r(){return n(this,r),t.apply(this,arguments)}return r}(F),B=function(e){a(r,e);var t=y(r);function r(){return n(this,r),t.apply(this,arguments)}return r}(F),D=function(e){a(r,e);var t=y(r);function r(){return n(this,r),t.apply(this,arguments)}return r}(F),M=function(e){a(r,e);var t=y(r);function r(){return n(this,r),t.apply(this,arguments)}return r}(F),G=function(e){a(r,e);var t=y(r);function r(){return n(this,r),t.apply(this,arguments)}return r}(P),H=function(e){return null!==(n=e)&&"object"===t(n)&&("string"==typeof e.message&&"number"==typeof e.code);var n},z=function(e){var t=e.httpStatus,n=e.body;if(!function(e){return!(e<200||e>=300)}(t)){if(H(n)){var r=n.code;if(4010===r)return new L(e);if(4040===r)return new N(e);if(4042===r)return new B(e);if(4044===r)return new D(e);if(4046===r)return new M(e);if(4020===r)return new U(e);if(4021===r)return new q(e);if(404===t)return new F(e);if(400===t)return new T(e);if(402===t)return new R(e);if(401===t)return new I(e);if(500===t)return new G(e)}return new x({httpStatus:t,message:JSON.stringify(n)})}},K=Object.freeze({__proto__:null,IdealPostcodesError:x,IdpcApiError:P,IdpcBadRequestError:T,IdpcUnauthorisedError:I,IdpcInvalidKeyError:L,IdpcRequestFailedError:R,IdpcBalanceDepletedError:U,IdpcLimitReachedError:q,IdpcResourceNotFoundError:F,IdpcPostcodeNotFoundError:N,IdpcKeyNotFoundError:B,IdpcUdprnNotFoundError:D,IdpcUmprnNotFoundError:M,IdpcServerError:G,parse:z}),J=function(e){return void 0===e?{}:Object.keys(e).reduce((function(t,n){var r=e[n],o=X(r);return o.length>0&&(t[n]=o),t}),{})},$=function(e){return"string"==typeof e},X=function(e){var t,n=[];return t=e,Array.isArray(t)?(e.forEach((function(e){Q(e)&&n.push(e.toString()),$(e)&&n.push(e)})),n.join(",")):Q(e)?e.toString():$(e)?e:""},Q=function(e){return"number"==typeof e},V=function(e,t){var n=e.timeout;return Q(n)?n:t.timeout},W=function(e,t){var n=e.header,r=void 0===n?{}:n;return u(u({},t.header),J(r))},Y=function(e){var t=e.header,n=e.options,r=e.client;return t.Authorization=function(e,t){var n=[],r=t.api_key||e.api_key;n.push(["api_key",r]);var o=t.licensee;void 0!==o&&n.push(["licensee",o]);var i=t.user_token;return void 0!==i&&n.push(["user_token",i]),"IDEALPOSTCODES ".concat(Z(n))}(r,n),t},Z=function(e){return e.map((function(e){var t=m(e,2),n=t[0],r=t[1];return"".concat(n,'="').concat(r,'"')})).join(" ")},ee=function(e){var t=e.header,n=e.options.sourceIp;return void 0!==n&&(t["IDPC-Source-IP"]=n),t},te=function(e){var t=e.query,n=e.options.filter;return void 0!==n&&(t.filter=n.join(",")),t},ne=function(e){var t,n=e.client,r=e.query,o=e.options;return n.tags.length&&(t=n.tags),o.tags&&(t=o.tags),void 0!==t&&(r.tags=t.join(",")),r},re=function(e,t){return[e.client.url(),e.resource,encodeURIComponent(t),e.action].filter((function(e){return void 0!==e})).join("/")},oe=function(e){var t=e.client;return function(n,r){return t.agent.http({method:"GET",url:re(e,n),query:J(r.query),header:W(r,t),timeout:V(r,t)}).then((function(e){var t=z(e);if(t)throw t;return e}))}},ie=function(e){var t=e.client,n=e.resource;return function(e){return t.agent.http({method:"GET",url:"".concat(t.url(),"/").concat(n),query:J(e.query),header:W(e,t),timeout:V(e,t)}).then((function(e){var t=z(e);if(t)throw t;return e}))}},se="keys",ue=function(){function e(t){n(this,e),this.tls=t.tls,this.api_key=t.api_key,this.baseUrl=t.baseUrl,this.version=t.version,this.strictAuthorisation=t.strictAuthorisation,this.timeout=t.timeout,this.agent=t.agent,this.tags=t.tags,this.header=u(u({},e.defaults.header),t.header),this.postcodes={retrieve:oe({resource:"postcodes",client:this})},this.addresses=function(e){return{list:ie({resource:"addresses",client:e})}}(this),this.udprn=function(e){return{retrieve:oe({resource:"udprn",client:e})}}(this),this.umprn=function(e){return{retrieve:oe({resource:"umprn",client:e})}}(this),this.keys=function(e){return{retrieve:oe({resource:se,client:e}),usage:oe({resource:se,client:e,action:"usage"})}}(this),this.autocomplete=function(e){return{list:ie({resource:"autocomplete/addresses",client:e})}}(this)}return o(e,[{key:"url",value:function(){return"".concat(this.protocol(),"://").concat(this.baseUrl,"/").concat(this.version)}},{key:"protocol",value:function(){return this.tls?"https":"http"}},{key:"ping",value:function(){var e="".concat(this.protocol(),"://").concat(this.baseUrl,"/");return this.agent.http({method:"GET",url:e,header:{},query:{},timeout:this.timeout})}},{key:"lookupPostcode",value:function(e){var t=this.toAddressIdQuery(e),n=e.page;return void 0!==n&&(t.query.page=n.toString()),this.postcodes.retrieve(e.postcode,t).then((function(e){return e.body.result})).catch((function(e){if(e instanceof N)return[];throw e}))}},{key:"lookupAddress",value:function(e){var t={},n={query:e.query};Y({client:this,header:t,options:e}),ee({header:t,options:e}),te({query:n,options:e}),ne({client:this,query:n,options:e}),function(e){var t=e.query,n=e.options,r=n.page,o=n.limit;void 0!==r&&(t.page=r.toString()),void 0!==o&&(t.limit=o.toString())}({query:n,options:e});var r={header:t,query:n};return void 0!==e.timeout&&(r.timeout=e.timeout),this.addresses.list(r).then((function(e){return e.body.result.hits}))}},{key:"toAddressIdQuery",value:function(e){var t={},n={};Y({client:this,header:t,options:e}),ee({header:t,options:e}),te({query:n,options:e}),ne({client:this,query:n,options:e});var r={header:t,query:n};return void 0!==e.timeout&&(r.timeout=e.timeout),r}},{key:"lookupUdprn",value:function(e){var t=this.toAddressIdQuery(e);return this.udprn.retrieve(e.udprn.toString(),t).then((function(e){return e.body.result})).catch((function(e){if(e instanceof D)return null;throw e}))}},{key:"lookupUmprn",value:function(e){var t=this.toAddressIdQuery(e);return this.umprn.retrieve(e.umprn.toString(),t).then((function(e){return e.body.result})).catch((function(e){if(e instanceof M)return null;throw e}))}},{key:"checkKeyUsability",value:function(e){var t=e.api_key,n=void 0===t?this.api_key:t,r=e.timeout,o=e.licensee,i={query:void 0===o?{}:{licensee:o},header:{}};return void 0!==r&&(i.timeout=r),this.keys.retrieve(n,i).then((function(e){return e.body.result}))}}]),e}();ue.defaults={header:{Accept:"application/json","Content-Type":"application/json"}},ue.errors=K;var ae=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},ce=Object.prototype.toString;function le(e){return"[object Array]"===ce.call(e)}function fe(e){return void 0===e}function de(e){return null!==e&&"object"==typeof e}function he(e){if("[object Object]"!==ce.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function pe(e){return"[object Function]"===ce.call(e)}function ve(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),le(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var ye={isArray:le,isArrayBuffer:function(e){return"[object ArrayBuffer]"===ce.call(e)},isBuffer:function(e){return null!==e&&!fe(e)&&null!==e.constructor&&!fe(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:de,isPlainObject:he,isUndefined:fe,isDate:function(e){return"[object Date]"===ce.call(e)},isFile:function(e){return"[object File]"===ce.call(e)},isBlob:function(e){return"[object Blob]"===ce.call(e)},isFunction:pe,isStream:function(e){return de(e)&&pe(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:ve,merge:function e(){var t={};function n(n,r){he(t[r])&&he(n)?t[r]=e(t[r],n):he(n)?t[r]=e({},n):le(n)?t[r]=n.slice():t[r]=n}for(var r=0,o=arguments.length;r<o;r++)ve(arguments[r],n);return t},extend:function(e,t,n){return ve(t,(function(t,r){e[r]=n&&"function"==typeof t?ae(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}};function me(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var ge=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(ye.isURLSearchParams(t))r=t.toString();else{var o=[];ye.forEach(t,(function(e,t){null!=e&&(ye.isArray(e)?t+="[]":e=[e],ye.forEach(e,(function(e){ye.isDate(e)?e=e.toISOString():ye.isObject(e)&&(e=JSON.stringify(e)),o.push(me(t)+"="+me(e))})))})),r=o.join("&")}if(r){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e};function be(){this.handlers=[]}be.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},be.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},be.prototype.forEach=function(e){ye.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var we=be,ke=function(e,t,n){return ye.forEach(n,(function(n){e=n(e,t)})),e},Se=function(e){return!(!e||!e.__CANCEL__)},Ee=function(e,t){ye.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))},Ce=function(e,t,n,r,o){return function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),t,n,r,o)},Ae=ye.isStandardBrowserEnv()?{write:function(e,t,n,r,o,i){var s=[];s.push(e+"="+encodeURIComponent(t)),ye.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),ye.isString(r)&&s.push("path="+r),ye.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},_e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],je=ye.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=ye.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},Oe=function(e){return new S((function(t,n){var r=e.data,o=e.headers;ye.isFormData(r)&&delete o["Content-Type"];var i=new XMLHttpRequest;if(e.auth){var s=e.auth.username||"",u=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(s+":"+u)}var a,c,l=(a=e.baseURL,c=e.url,a&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(c)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(a,c):c);if(i.open(e.method.toUpperCase(),ge(l,e.params,e.paramsSerializer),!0),i.timeout=e.timeout,i.onreadystatechange=function(){if(i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))){var r,o,s,u,a,c="getAllResponseHeaders"in i?(r=i.getAllResponseHeaders(),a={},r?(ye.forEach(r.split("\n"),(function(e){if(u=e.indexOf(":"),o=ye.trim(e.substr(0,u)).toLowerCase(),s=ye.trim(e.substr(u+1)),o){if(a[o]&&_e.indexOf(o)>=0)return;a[o]="set-cookie"===o?(a[o]?a[o]:[]).concat([s]):a[o]?a[o]+", "+s:s}})),a):a):null,l={data:e.responseType&&"text"!==e.responseType?i.response:i.responseText,status:i.status,statusText:i.statusText,headers:c,config:e,request:i};!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(Ce("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}(t,n,l),i=null}},i.onabort=function(){i&&(n(Ce("Request aborted",e,"ECONNABORTED",i)),i=null)},i.onerror=function(){n(Ce("Network Error",e,null,i)),i=null},i.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(Ce(t,e,"ECONNABORTED",i)),i=null},ye.isStandardBrowserEnv()){var f=(e.withCredentials||je(l))&&e.xsrfCookieName?Ae.read(e.xsrfCookieName):void 0;f&&(o[e.xsrfHeaderName]=f)}if("setRequestHeader"in i&&ye.forEach(o,(function(e,t){void 0===r&&"content-type"===t.toLowerCase()?delete o[t]:i.setRequestHeader(t,e)})),ye.isUndefined(e.withCredentials)||(i.withCredentials=!!e.withCredentials),e.responseType)try{i.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&i.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&i.upload&&i.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){i&&(i.abort(),n(e),i=null)})),r||(r=null),i.send(r)}))},xe={"Content-Type":"application/x-www-form-urlencoded"};function Pe(e,t){!ye.isUndefined(e)&&ye.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var Te,Ie={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(Te=Oe),Te),transformRequest:[function(e,t){return Ee(t,"Accept"),Ee(t,"Content-Type"),ye.isFormData(e)||ye.isArrayBuffer(e)||ye.isBuffer(e)||ye.isStream(e)||ye.isFile(e)||ye.isBlob(e)?e:ye.isArrayBufferView(e)?e.buffer:ye.isURLSearchParams(e)?(Pe(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):ye.isObject(e)?(Pe(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};Ie.headers={common:{Accept:"application/json, text/plain, */*"}},ye.forEach(["delete","get","head"],(function(e){Ie.headers[e]={}})),ye.forEach(["post","put","patch"],(function(e){Ie.headers[e]=ye.merge(xe)}));var Le=Ie;function Re(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var Ue=function(e){return Re(e),e.headers=e.headers||{},e.data=ke(e.data,e.headers,e.transformRequest),e.headers=ye.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),ye.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||Le.adapter)(e).then((function(t){return Re(e),t.data=ke(t.data,t.headers,e.transformResponse),t}),(function(t){return Se(t)||(Re(e),t&&t.response&&(t.response.data=ke(t.response.data,t.response.headers,e.transformResponse))),S.reject(t)}))},qe=function(e,t){t=t||{};var n={},r=["url","method","data"],o=["headers","auth","proxy","params"],i=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function u(e,t){return ye.isPlainObject(e)&&ye.isPlainObject(t)?ye.merge(e,t):ye.isPlainObject(t)?ye.merge({},t):ye.isArray(t)?t.slice():t}function a(r){ye.isUndefined(t[r])?ye.isUndefined(e[r])||(n[r]=u(void 0,e[r])):n[r]=u(e[r],t[r])}ye.forEach(r,(function(e){ye.isUndefined(t[e])||(n[e]=u(void 0,t[e]))})),ye.forEach(o,a),ye.forEach(i,(function(r){ye.isUndefined(t[r])?ye.isUndefined(e[r])||(n[r]=u(void 0,e[r])):n[r]=u(void 0,t[r])})),ye.forEach(s,(function(r){r in t?n[r]=u(e[r],t[r]):r in e&&(n[r]=u(void 0,e[r]))}));var c=r.concat(o).concat(i).concat(s),l=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===c.indexOf(e)}));return ye.forEach(l,a),n};function Fe(e){this.defaults=e,this.interceptors={request:new we,response:new we}}Fe.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=qe(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[Ue,void 0],n=S.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},Fe.prototype.getUri=function(e){return e=qe(this.defaults,e),ge(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},ye.forEach(["delete","get","head","options"],(function(e){Fe.prototype[e]=function(t,n){return this.request(qe(n||{},{method:e,url:t,data:(n||{}).data}))}})),ye.forEach(["post","put","patch"],(function(e){Fe.prototype[e]=function(t,n,r){return this.request(qe(r||{},{method:e,url:t,data:n}))}}));var Ne=Fe;function Be(e){this.message=e}Be.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Be.prototype.__CANCEL__=!0;var De=Be;function Me(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new S((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new De(e),t(n.reason))}))}Me.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Me.source=function(){var e;return{token:new Me((function(t){e=t})),cancel:e}};var Ge=Me;function He(e){var t=new Ne(e),n=ae(Ne.prototype.request,t);return ye.extend(n,Ne.prototype,t),ye.extend(n,t),n}var ze=He(Le);ze.Axios=Ne,ze.create=function(e){return He(qe(ze.defaults,e))},ze.Cancel=De,ze.CancelToken=Ge,ze.isCancel=Se,ze.all=function(e){return S.all(e)},ze.spread=function(e){return function(t){return e.apply(null,t)}},ze.isAxiosError=function(e){return"object"==typeof e&&!0===e.isAxiosError};var Ke=ze,Je=ze;Ke.default=Je;var $e=Ke,Xe=x,Qe=function(e,t){return{httpRequest:e,body:t.data,httpStatus:t.status||0,header:(n=t.headers,Object.keys(n).reduce((function(e,t){var r=n[t];return"string"==typeof r?e[t]=r:Array.isArray(r)&&(e[t]=r.join(",")),e}),{})),metadata:{response:t}};var n},Ve=function(e){var t=new Xe({message:"[".concat(e.name,"] ").concat(e.message),httpStatus:0,metadata:{axios:e}});return S.reject(t)},We=function(){return!0},Ye=function(){function e(){n(this,e),this.Axios=$e.create({validateStatus:We})}return o(e,[{key:"requestWithBody",value:function(e){var t=e.body,n=e.method,r=e.timeout,o=e.url,i=e.header,s=e.query;return this.Axios.request({url:o,method:n,headers:i,params:s,data:t,timeout:r}).then((function(t){return Qe(e,t)})).catch(Ve)}},{key:"request",value:function(e){var t=e.method,n=e.timeout,r=e.url,o=e.header,i=e.query;return this.Axios.request({url:r,method:t,headers:o,params:i,timeout:n}).then((function(t){return Qe(e,t)})).catch(Ve)}},{key:"http",value:function(e){return void 0!==e.body?this.requestWithBody(e):this.request(e)}}]),e}(),Ze=function(e){a(r,e);var t=y(r);function r(e){n(this,r);var o=new Ye,i=void 0===e.tls||e.tls,s=void 0===e.baseUrl?"api.ideal-postcodes.co.uk":e.baseUrl,a=void 0===e.version?"v1":e.version,c=void 0!==e.strictAuthorisation&&e.strictAuthorisation,l=void 0===e.timeout?1e4:e.timeout,f=e.tags||[],d={tls:i,api_key:e.api_key,baseUrl:s,version:a,strictAuthorisation:c,timeout:l,tags:f,header:u(u({},{}),e.header)};return t.call(this,u({agent:o},d))}return r}(ue),et=function(e){return"string"==typeof e},tt=function(e,t){return et(e)?t.querySelector(e):e},nt=window.document,rt=function(e){return e.style.display="none",e},ot=function(e){return e.style.display="",e},it=function(e){null!==e&&null!==e.parentNode&&e.parentNode.removeChild(e)},st=function(e,t){return e.dispatchEvent(function(e){var t=e.event,n=e.bubbles,r=void 0===n||n,o=e.cancelable,i=void 0===o||o;if("function"==typeof window.Event)return new window.Event(t,{bubbles:r,cancelable:i});var s=document.createEvent("Event");return s.initEvent(t,r,i),s}({event:t}))},ut=function(e){return null!==e&&e instanceof HTMLSelectElement},at=function(e){return null!==e&&e instanceof HTMLInputElement},ct=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&at(e)&&dt({e:e,value:t,skipTrigger:n})},lt=function(e,t){return null!==t&&null!==e.querySelector('[value="'.concat(t,'"]'))},ft=function(e,t){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value");void 0!==n&&(void 0!==n.set&&n.set.call(e,t))},dt=function(e){var t,n,r,o;null!==e.value&&(n=(t=e).e,r=t.value,o=t.skipTrigger,null!==r&&ut(n)&&(ft(n,r),o||st(n,"select"),st(n,"change")),function(e){var t=e.e,n=e.value,r=e.skipTrigger;null!==n&&at(t)&&(ft(t,n),r||st(t,"input"),st(t,"change"))}(e))},ht=function(e){return/^GY/.test(e.postcode)?"GG":/^JE/.test(e.postcode)?"JE":null},pt="United Kingdom",vt="Isle of Man",yt="England",mt="Scotland",gt="Wales",bt="Northern Ireland",wt="Channel Islands",kt=function(e){var t=e.country;if(t===yt)return pt;if(t===mt)return pt;if(t===gt)return pt;if(t===bt)return pt;if(t===vt)return vt;if(t===wt){var n=ht(e);if("GG"===n)return"Guernsey";if("JE"===n)return"Jersey"}return null},St=function(e,t){if(e){if(ut(e)){var n=function(e){var t=e.country;return t===yt||t===mt||t===gt||t===bt?"GB":t===vt?"IM":t===wt?ht(e):null}(t);lt(e,n)&&dt({e:e,value:n});var r=kt(t);lt(e,r)&&dt({e:e,value:r})}if(at(e)){var o=kt(t);dt({e:e,value:o})}}},Et={};window&&(window.idpcGlobal?Et=window.idpcGlobal:window.idpcGlobal=Et);var Ct=/^(of|le|upon|on|the)$/,At=/\w+&\w+/,_t=function(e){return(e=e.toLowerCase()).match(Ct)?e:e.match(At)?e.toUpperCase():e.charAt(0).toUpperCase()+e.slice(1)},jt=/-/,Ot=/^(in|de|under|upon|y|on|over|the|by)$/,xt=function(e){return null===e.match(jt)?e:e.split("-").map((function(e){return e.match(Ot)?e.toLowerCase():_t(e)})).join("-")},Pt=/bo'ness/i,Tt=function(e){return e.match(Pt)?"Bo'Ness":e},It=function(e){return e.filter((function(e){return et(e)?!!e.trim():!!e})).join(", ")},Lt=function(e,t){var n=e[t];return"number"==typeof n?n.toString():void 0===n?"":n},Rt=function(e,t,n){var r=m(function(e,t){var n=t.line_1,r=t.line_2,o=t.line_3;return 3===e?[n,r,o]:2===e?[n,It([r,o]),""]:[It([n,r,o]),"",""]}(function(e){var t=e.line_2,n=e.line_3;return t?n?3:2:1}(e),t),3),o=r[0],i=r[1],s=r[2];ct(tt(e.line_1||null,n),o),ct(tt(e.line_2||null,n),i),ct(tt(e.line_3||null,n),s)},Ut=function(e){var t,n=e.outputFields,r=e.config,o=u({},e.address),i=r.scope,s=r.titleizePostTown;for(t in r.removeOrganisation&&qt(o),s&&(o.post_town=o.post_town.split(" ").map(_t).map(xt).map(Tt).join(" ")),Rt(n,o,i),delete o.line_1,delete o.line_2,delete o.line_3,St(tt(n.country||null,i),o),delete o.country,n)if(void 0!==o[t]&&n.hasOwnProperty(t)){var a=n[t];if(!a)continue;ct(tt(a,i),Lt(o,t))}},qt=function(e){return 0===e.organisation_name.length||0===e.line_2.length&&0===e.line_3.length||e.line_1===e.organisation_name&&(e.line_1=e.line_2,e.line_2=e.line_3,e.line_3=""),e},Ft={13:"Enter",38:"ArrowUp",40:"ArrowDown",36:"Home",35:"End",27:"Escape",8:"Backspace"},Nt=["Enter","ArrowUp","ArrowDown","Home","End","Escape","Backspace"],Bt=function(e){return e.keyCode?Ft[e.keyCode]||null:(t=e.key,-1!==Nt.indexOf(t)?e.key:null);var t},Dt=function(e){return e.preventDefault&&e.preventDefault(),!1},Mt=function(e,t){if(null!==e){var n=[];Object.keys(t).forEach((function(e){return n.push("".concat(e,": ").concat(t[e]))})),e.removeAttribute("style"),n.length>0&&e.setAttribute("style",n.join("; "))}},Gt=function(){},Ht=function(){return!1},zt=function(e){if("Enter"===Bt(e))return e.preventDefault(),this.handleClick(),!1},Kt=function(e){return e.preventDefault(),this.options.onButtonTrigger.call(this),this.handleClick(),!1},Jt=function(){var e=parseInt(this.select.value,10);isNaN(e)||this.selectAddress(e)},$t={apiKey:"",checkKey:!0,context:"",scope:window.document,document:window.document,outputScope:null,onButtonTrigger:Gt,onSearchCompleted:Gt,onAddressesRetrieved:Gt,onAddressSelected:Gt,onSelectCreated:Gt,onSelectRemoved:Gt,onLookupTriggered:Gt,shouldLookupTrigger:function(){return!0},onSearchError:Gt,onLoaded:Gt,onFailedCheck:Gt,onRemove:Gt,onAddressPopulated:Gt,onUnhide:Gt,input:null,inputId:null,inputClass:"idpc-input",inputAriaLabel:"Search a postcode to retrieve your address",placeholder:"Search your postcode",button:null,buttonId:null,buttonLabel:"Find my Address",buttonClass:"idpc-button",selectContainer:null,selectId:null,selectClass:"idpc-select",selectContainerId:null,selectContainerClass:"idpc-select-container",selectAriaLabel:"Select your address",unhide:null,unhideClass:"idpc-unhide",message:null,messageId:null,messageClass:"idpc-error",msgSelect:"Please select your address",msgDisabled:"Finding addresses...",msgNotFound:"Your postcode could not be found. Please type in your address",msgAddressNotFound:"We could not find a match for your address. Please type in your address",msgError:"Sorry, we weren't able to get the address you were looking for. Please type in your address",msgUnhide:"Enter address manually",cooloff:500,removeOrganisation:!1,selectSinglePremise:!1,titleizePostTown:!0,postcodeSearchFormatter:function(e){var t=[e.line_1];return""!==e.line_2&&t.push(e.line_2),t.join(" ")},addressSearchFormatter:function(e){var t=[e.line_1];return""!==e.line_2&&t.push(e.line_2),t.push(e.post_town),t.push(e.postcode_outward),t.join(", ")},outputFields:{},strictlyPostcodes:!0,limit:10,inputStyle:{},buttonStyle:{},messageStyle:{},selectStyle:{},contextStyle:{},hide:[],autocomplete:"none"},Xt=function(){function e(t){var r,o=this;n(this,e),this.options=u(u({},$t),t),this.client=new Ze(u(u({},this.options),{},{api_key:this.options.apiKey})),this.scope=(r=this.options.scope,et(r)?nt.querySelector(r):null===r?nt:r),this.document=function(e){return e instanceof Document?e:e.ownerDocument?e.ownerDocument:nt}(this.scope),this.outputScope=this.findOrCreate(this.options.outputScope,(function(){return o.scope})),this.data=[],this.lastLookup="",this.context=this.findOrCreate(this.options.context),Mt(this.context,this.options.contextStyle),this.keypress=zt.bind(this),this.click=Kt.bind(this),this.selectEvent=Jt.bind(this),this.unhideEvent=this.unhideFields.bind(this),this.input=this.createInput(),this.button=this.createButton(),this.message=this.createMessage(),this.select=this.createSelect(),this.selectContainer=this.createContainer(),this.unhide=this.createUnhide(),this.init()}return o(e,[{key:"findOrCreate",value:function(e,t){return et(e)?this.scope.querySelector(e):t&&null===e?t():e}},{key:"createUnhide",value:function(){var e=this,t=this.findOrCreate(this.options.unhide,(function(){var t=e.document.createElement("p");return t.innerText=e.options.msgUnhide,t.setAttribute("role","button"),t.setAttribute("tabindex","0"),e.options.unhideClass&&(t.className=e.options.unhideClass),t}));return t.addEventListener("click",this.unhideEvent),t}},{key:"unmountUnhide",value:function(){this.unhide.removeEventListener("click",this.unhideEvent),!this.options.unhide&&this.options.hide.length&&it(this.unhide)}},{key:"createContainer",value:function(){var e=this;return this.findOrCreate(this.options.selectContainer,(function(){var t=e.options,n=e.document.createElement("div");return t.selectContainerId&&(n.id=t.selectContainerId),t.selectContainerClass&&(n.className=t.selectContainerClass),n.setAttribute("aria-live","polite"),rt(n),n}))}},{key:"unmountContainer",value:function(){it(this.selectContainer)}},{key:"createInput",value:function(){var e=this,t=this.findOrCreate(this.options.input,(function(){var t=e.document.createElement("input"),n=e.options;return t.type="text",n.inputId&&(t.id=n.inputId),n.inputClass&&(t.className=n.inputClass),n.placeholder&&(t.placeholder=n.placeholder),n.inputAriaLabel&&t.setAttribute("aria-label",n.inputAriaLabel),n.autocomplete&&t.setAttribute("autocomplete",n.autocomplete),Mt(t,e.options.inputStyle),t}));return t.addEventListener("keypress",this.keypress),t.addEventListener("submit",Ht),t}},{key:"unmountInput",value:function(){this.input.removeEventListener("keypress",this.keypress),this.input.removeEventListener("submit",Ht),null===this.options.input&&it(this.input)}},{key:"createButton",value:function(){var e=this,t=this.findOrCreate(this.options.button,(function(){var t=e.document.createElement("button"),n=e.options;return t.type="button",n.buttonLabel&&(t.innerText=n.buttonLabel),n.buttonId&&(t.id=n.buttonId),n.buttonClass&&(t.className=n.buttonClass),Mt(t,e.options.buttonStyle),t.onclick=Dt,t.ontouchstart=Dt,t}));return t.addEventListener("submit",Ht),t.addEventListener("click",this.click),t}},{key:"unmountButton",value:function(){this.button.removeEventListener("submit",Ht),this.button.removeEventListener("click",this.click),null===this.options.button&&it(this.button)}},{key:"createMessage",value:function(){var e=this;return this.findOrCreate(this.options.message,(function(){var t=e.document.createElement("p"),n=e.options;return n.messageClass&&(t.className=n.messageClass),n.messageId&&(t.id=n.messageId),t.setAttribute("role","alert"),Mt(t,e.options.messageStyle),rt(t),t}))}},{key:"unmountMessage",value:function(){null===this.options.message&&it(this.message)}},{key:"createSelect",value:function(){var e=this.document.createElement("select"),t=this.options;return t.selectId&&(e.id=t.selectId),t.selectClass&&(e.className=t.selectClass),Mt(e,this.options.selectStyle),t.selectAriaLabel&&e.setAttribute("aria-label",t.selectAriaLabel),e.addEventListener("change",this.selectEvent),e}},{key:"mountSelect",value:function(e){e&&(this.data=e),function(e){var t;for(t=e.options.length-1;t>=0;t--)e.remove(t)}(this.select),this.select.appendChild(this.createOption("ideal",this.options.msgSelect));for(var t=0;t<this.data.length;t+=1)this.select.appendChild(this.createOption(t.toString(),this.formatAddress(this.data[t])));this.selectContainer.appendChild(this.select),ot(this.selectContainer),this.options.onSelectCreated.call(this,this.select)}},{key:"unmountSelect",value:function(){it(this.select),rt(this.selectContainer),this.options.onSelectRemoved.call(this)}},{key:"selectAddress",value:function(e){var t=this.data[e];t&&(this.populateAddress(t),this.options.onAddressSelected.call(this,t))}},{key:"handleClick",value:function(){if(!this.options.shouldLookupTrigger.call(this))return!1;this.options.onLookupTriggered.call(this);var e=this.input.value;return this.lastLookup===e||(this.lastLookup=e,this.reset(),this.disableButton(),this.executeSearch(e)),!1}},{key:"disableButton",value:function(e){this.options.button||(this.button.setAttribute("disabled","true"),this.button.innerText=e||this.options.msgDisabled)}},{key:"enableButton",value:function(){this.options.button||(this.button.removeAttribute("disabled"),this.button.innerText=this.options.buttonLabel)}},{key:"enableLookup",value:function(){var e=this;if(!this.options.button){var t=this.options.cooloff;if(0===t)return this.enableButton();setTimeout((function(){return e.enableButton()}),t)}}},{key:"reset",value:function(){this.unmountSelect(),this.hideMessage()}},{key:"removeAll",value:function(){this.unmountInput(),this.unmountButton(),this.unmountContainer(),this.unmountMessage(),this.unmountUnhide(),this.options.onRemove.call(this)}},{key:"notFoundMessage",value:function(){return this.options.strictlyPostcodes?this.options.msgNotFound:this.options.msgAddressNotFound}},{key:"executeSearch",value:function(e){var t=this;this.enableLookup(),(this.options.strictlyPostcodes?this.searchPostcode(e):this.searchAddress(e)).then((function(n){return t.options.onSearchCompleted.call(t,null,n),0===n.length?t.setMessage(t.notFoundMessage()):(t.lastLookup=e,t.data=n,t.options.onAddressesRetrieved.call(t,n),t.options.selectSinglePremise&&1===n.length?t.selectAddress(0):void t.mountSelect(n))})).catch((function(e){t.setMessage(t.options.msgError),t.options.onSearchCompleted.call(t,null,[]),t.options.onSearchError.call(t,e)}))}},{key:"searchPostcode",value:function(e){return this.client.lookupPostcode({postcode:e})}},{key:"searchAddress",value:function(e){return this.client.lookupAddress({query:e,limit:this.options.limit})}},{key:"formatAddress",value:function(e){return(this.options.strictlyPostcodes?this.options.postcodeSearchFormatter:this.options.addressSearchFormatter)(e)}},{key:"createOption",value:function(e,t){var n=this.document.createElement("option");return n.text=t,n.value=e,n}},{key:"setMessage",value:function(e){if(this.message){if(void 0===e)return this.hideMessage();ot(this.message),this.message.innerText=e}}},{key:"hideMessage",value:function(){this.message&&(this.message.innerText="",rt(this.message))}},{key:"init",value:function(){var e=this,t=function(){e.render(),e.hideFields(),e.options.onLoaded.call(e)};if(!this.options.checkKey)return t();this.client.checkKeyUsability({}).then((function(e){return e.available?t():S.reject("Key not available")})).catch((function(t){e.options.onFailedCheck&&e.options.onFailedCheck(t)}))}},{key:"populateAddress",value:function(e){this.unhideFields();var t=this.options.outputFields,n=u(u({},this.options),{},{scope:this.outputScope});Ut({outputFields:t,address:e,config:n}),this.options.onAddressPopulated.call(this,e)}},{key:"hiddenFields",value:function(){var e=this;return this.options.hide.map((function(t){return et(t)?(n=e.scope,(r=t)?n.querySelector(r):null):t;var n,r})).filter((function(e){return null!==e}))}},{key:"hideFields",value:function(){this.hiddenFields().forEach(rt)}},{key:"unhideFields",value:function(){this.hiddenFields().forEach(ot),this.options.onUnhide.call(this)}},{key:"render",value:function(){this.context.innerHTML="",this.options.input||this.context.appendChild(this.input),this.options.button||this.context.appendChild(this.button),this.options.selectContainer||this.context.appendChild(this.selectContainer),this.options.message||this.context.appendChild(this.message),!this.options.unhide&&this.options.hide.length&&this.context.appendChild(this.unhide)}}]),e}(),Qt=[],Vt={controllers:Qt,setup:function(e){var t=new Xt(e);return Qt.push(t),t},Controller:Xt,defaults:$t};e.Controller=Xt,e.PostcodeLookup=Vt,Object.defineProperty(e,"__esModule",{value:!0})}));
